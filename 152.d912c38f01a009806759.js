"use strict";(self.webpackChunklbdserver=self.webpackChunklbdserver||[]).push([[152],{65152:(e,t,r)=>{r.r(t);var n=r(77865),o=r.n(n),a=r(21704),i=r.n(a),c=r(29439),s=r(46078),l=r(75073),u=(r(72231).v4,r(99170)),m=(0,s.atom)({key:"store",default:new u.Store}),p=(0,s.atom)({key:"openOptions",default:!0}),d=((0,s.atom)({key:"session",default:new l.Session}),(0,s.atom)({key:"projects",default:[]})),g=(0,s.atom)({key:"datasets",default:[]}),f=(0,s.atom)({key:"selectedElements",default:[]}),h=(0,s.atom)({key:"selectionId",default:""}),y=(0,s.atom)({key:"trigger",default:1});const v=(0,s.atom)({key:"config",default:{tabs:{url:"https://consolidproject.github.io/pluginAggregatorTabs/remoteEntry.js",scope:"tabs",label:"tabs",module:"./index",dimensions:{x:0,y:0,h:900,w:600},children:{resourcemanager:{url:"http://localhost:8081/remoteEntry.js",scope:"resourcemanager",module:"./index",icon:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"},projectquery:{url:"http://localhost:8083/remoteEntry.js",scope:"projectquery",module:"./index",icon:"M7 9H2V7h5v2zm0 3H2v2h5v-2zm13.59 7-3.83-3.83c-.8.52-1.74.83-2.76.83-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 1.02-.31 1.96-.83 2.75L22 17.59 20.59 19zM17 11c0-1.65-1.35-3-3-3s-3 1.35-3 3 1.35 3 3 3 3-1.35 3-3zM2 19h10v-2H2v2z"}}},viewer:{url:"http://localhost:8082/remoteEntry.js",scope:"viewer",label:"viewer",module:"./index",dimensions:{x:600,y:0,h:400,w:800}},imageannotator:{url:"http://localhost:8084/remoteEntry.js",scope:"imageannotator",label:"imageannotator",module:"./index",dimensions:{x:600,y:400,h:500,w:800}}}});var E=r(86712),b=r(64566),w=r(87757),j=r.n(w),x=(r(72231),r(15861)),O=r(64103),S=r(19705);const k=function(e){var t=e.project,r=e.projects,n=e.setProjects,a=e.setDatasets,i=(0,S.useQuery)(t,(0,x.Z)(j().mark((function e(){var r;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.queryComunica)("select ?i where {?p <https://lbdserver.org/vocabulary#hasProjectId> ?i}",[t+"local/"],{results:!0,single:!0,variable:"i"},(0,l.getDefaultSession)());case 2:return r=e.sent,console.log(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))),c=(i.isLoading,i.isError,i.data);function s(){return(s=(0,x.Z)(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.includes(t)?(n((function(e){return e.filter((function(e){return e!=t}))})),a([])):n([t]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return i.error,o().createElement("div",null,o().createElement(E.Card,{style:{marginTop:5,marginBottom:5},variant:"outlined"},o().createElement(E.CardContent,null,o().createElement(E.Typography,{component:"p"},c),o().createElement(E.FormGroup,null,o().createElement(E.FormControlLabel,{control:o().createElement(E.Switch,{color:"primary",checked:r.includes(t),onChange:function(e){return function(){return s.apply(this,arguments)}()}}),label:"Active"})))))};r(334);const T=function(e){var t=e.trigger,r=e.projects,a=e.setProjects,i=e.setDatasets,s=e.setTrigger,u=(0,n.useState)("https://pod.lbdserver.org/arch/lbd/"),m=(0,c.Z)(u,2),p=m[0],d=m[1],g=(0,n.useState)([]),f=(0,c.Z)(g,2),h=(f[0],f[1],(0,n.useState)([])),y=(0,c.Z)(h,2),v=y[0],b=y[1];return(0,n.useEffect)((function(){}),[t]),o().createElement(o().Fragment,null,o().createElement(E.Container,{component:"main"},o().createElement(E.Typography,{style:{textAlign:"justify"},variant:"body1"},"Projects can be found via aggregators, which basically contain pointers to existing projects. Aggregators are basically LDP (Linked Data Platform) containers. If you have a dedicated LBDserver project folder configured in your Solid Pod: that is an aggregator. Other aggregators could group projects based on location, typology etc."),o().createElement("br",null),o().createElement(E.Typography,{style:{textAlign:"justify"},variant:"body1"},"Activate a project from a public aggregator:"),o().createElement("br",null),o().createElement(E.TextField,{id:"aggregatorField",label:"aggregator",fullWidth:!0,variant:"outlined",value:p,onChange:function(e){return d(e.target.value)}}),o().createElement(E.Button,{fullWidth:!0,variant:"contained",color:"primary",onClick:(0,x.Z)(j().mark((function e(){var t;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.getLdpMembers)([p],(0,l.getDefaultSession)());case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)}))),style:{marginTop:20}},"GET PROJECTS"),v.map((function(e){return o().createElement(k,{setDatasets:i,key:e,project:e,projects:r,setProjects:a,setTrigger:s})}))))};var Z,C=r(4942);r(19400);const P=function(e){e.config;var t=e.setConfig,r=(e.trigger,e.setTrigger,(0,n.useState)([{description:"Query and visualise in 3D (PROJECT: Duplex)",url:"https://pod.consolidproject.be/struc/configs/visualiseGeometryConfig.json",guide:"DESCRIPTION: Activate the project 'duplex' in the 'DEMO PROJECTS' tab. Use the Resource Manager Plugin to activate the resources 'geom_arch' and 'lbd_arch. The 'geom_arch' dataset has a gltf distribution, which can be displayed by the Viewer Plugin. The 'lbd_arch' dataset is RDF and can be queried by the Query Plugin. Try some adaptations of the query (e.g. visualise beo:Window instead of beo:Door)."},{description:"Visualise 3D geometry and related image zones",url:"https://pod.consolidproject.be/struc/configs/linkImageAndGLTF.json",guide:"DESCRIPTION: Activate the project 'gravensteen' in the 'DEMO PROJECTS' tab. Use the Resource Manager Plugin to activate the resources 'img_interior1' and 'geometry_castle. The 'geometry_castle' dataset has a gltf distribution, which can be displayed by the Viewer Plugin. The 'img_interior1' dataset contains an image. Navigate in the 3D model and select an element of the columns. Then click 'GET ASSOCIATED REGIONS' in the image viewer. (NOTE: It's possible you have to click a few times)"}])),a=(0,c.Z)(r,2),i=a[0],s=(a[1],(0,n.useState)(i[0])),u=(0,c.Z)(s,2),m=(u[0],u[1]),p=(0,n.useState)(i[0]),d=(0,c.Z)(p,2),g=d[0],f=d[1];function h(){return(h=(0,x.Z)(j().mark((function e(r){var n,o,a;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n=(0,l.getDefaultSession)(),e.next=4,n.fetch(g.url);case 4:return o=e.sent,e.next=7,o.json();case 7:a=e.sent,m((function(){return a})),t((function(){return a}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o().createElement(o().Fragment,null,o().createElement(E.Container,{component:"main"},o().createElement(E.Typography,{style:{textAlign:"justify"},variant:"body1"},"To boost reuse of modules and integrate tools from various front-end frameworks (React, Angular, Vue, ...), we make use of"," ",o().createElement("a",{target:"_blank",href:"https://webpack.js.org/concepts/module-federation/"},"Webpack 5's Module Federation")," ",'feature. This allows remote modules ("micro-front-ends") to function both as standalone apps and be bundled in a container application to address larger use cases. In this container, configurations are "hot-loaded", which means they can be changed in real-time during your browser session. The container application is responsible for the exchange of important information, such as the active project, selected (document) resources or selected "concepts".'),o().createElement("br",null),o().createElement("h3",null,"Select a use case configuration"),o().createElement(E.Select,{label:"Use case configuration",fullWidth:!0,value:g,onChange:function(e){return f(e.target.value)}},i.map((function(e){return o().createElement(E.MenuItem,{key:e,value:e},e.description)}))),o().createElement(E.Typography,{style:{textAlign:"justify",margin:20,borderRadius:10,border:"1px solid #272822",padding:10,fontFamily:"Lucida Console, monospace",fontSize:12,backgroundColor:"Bisque"},variant:"body1"},g.guide),o().createElement(E.Button,{style:{marginTop:20,marginBottom:15},variant:"contained",fullWidth:!0,color:"primary",onClick:function(e){return h.apply(this,arguments)}},"FETCH")))};Z={borderLeft:"1px dashed white",lineHeight:1.25,width:"50%"},(0,C.Z)(Z,"borderLeft","1px solid lightgrey"),(0,C.Z)(Z,"margin",10);const D=function(e){var t=e.openOptions,r=e.setOpenOptions,a=e.trigger,i=e.setTrigger,s=e.setProjects,l=e.projects,u=e.setDatasets,m=e.config,p=e.setConfig,d=e.drawerWidth,g=(0,n.useState)(!0),f=(0,c.Z)(g,2),h=(f[0],f[1],(0,n.useState)(!1)),y=(0,c.Z)(h,2),v=y[0],w=y[1],j=(0,n.useState)(!1),x=(0,c.Z)(j,2),O=(x[0],x[1],(0,n.useState)(!1)),S=(0,c.Z)(O,2),k=S[0],Z=S[1],C=(0,n.useState)(!1),D=(0,c.Z)(C,2),I=(D[0],D[1],(0,n.useState)(!1)),A=(0,c.Z)(I,2),L=(A[0],A[1],(0,E.makeStyles)({paper:{width:d,backgroundColor:"bisque"}})());return o().createElement("div",null,o().createElement(o().Fragment,null,o().createElement(E.Drawer,{anchor:"right",open:t,onClose:function(){return r(!t)},classes:{paper:L.paper}},o().createElement("div",{style:{margin:20}},o().createElement(E.Typography,{variant:"h6"},"Welcome to the LBDserver plugin demo"),o().createElement("hr",null),o().createElement(E.Typography,{style:{textAlign:"justify"},variant:"body1"},'The LBDserver project is an ongoing research project that studies the organisation of heterogeneous, federated AECO projects. It proposes a data structure for connecting project-specific and contextual data on the Web, and provides the infrastructure for creating a "shopping cart" of GUI plugins for interacting with this data. These plugins can be used standalone as well as be configured alongside with other plugins to enable more fluent visualisation, querying and checking of the project.'),o().createElement("br",null),o().createElement(E.Typography,{style:{textAlign:"justify"},variant:"body1"},"This application illustrates the main concepts of the LBDserver. It is a rough prototype and only serves demonstration purposes."),o().createElement("br",null),o().createElement(E.Typography,{variant:"body1"},"You can visit"," ",o().createElement("a",{target:"_blank",href:"https://lbdserver.org"},"https://lbdserver.org")," ","for more information. When citing this research, please refer to one of the following papers: [...]")),m?o().createElement("div",null,o().createElement(E.Accordion,{style:R,expanded:k,onChange:function(){return Z(!k)}},o().createElement(E.AccordionSummary,{expandIcon:o().createElement(b.Z,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o().createElement(E.Typography,null,"MODULE FEDERATION")),o().createElement(E.AccordionDetails,null,o().createElement(P,{trigger:a,config:m,setConfig:p,setTrigger:i})))):o().createElement(o().Fragment,null),o().createElement("div",null,o().createElement(E.Accordion,{style:R,expanded:v,onChange:function(){return w(!v)}},o().createElement(E.AccordionSummary,{expandIcon:o().createElement(b.Z,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o().createElement(E.Typography,null,"DEMO PROJECTS")),o().createElement(E.AccordionDetails,null,o().createElement(T,{trigger:a,projects:l,setProjects:s,setTrigger:i,setDatasets:u})))))))};var R={marginLeft:10,marginRight:10,marginTop:5,marginBottom:5},I=r(90471),A=r.n(I),L=A()(function(){var e=(0,x.Z)(j().mark((function e(t,r){var n;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window[t].get(r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),z=A()((function(e){return new Promise((function(t,r){try{e.url||(console.log("no url provided"),r());var n=document.createElement("script");n.src=e.url,n.type="text/javascript",n.async=!0,document.head.appendChild(n),n.onload=function(){t()},n.onerror=function(){r()}}catch(e){console.log("error",e),r(e)}}))}));A()(function(){var e=(0,x.Z)(j().mark((function e(t,r){var n,o;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.system,e.prev=1,e.next=4,z(n);case 4:return e.next=6,L(n.scope,n.module);case 6:return o=e.sent,e.abrupt("return",o()[r]);case 10:e.prev=10,e.t0=e.catch(1),console.log("error in getFromRemote",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}());var F=r(13090),B=r.n(F);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=A()(function(){var e=(0,x.Z)(j().mark((function e(t,r){var n;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window[t].get(r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),H=A()((function(e){return new Promise((function(t,r){try{e.url||(console.log("no url provided"),r());var n=document.createElement("script");n.src=e.url,n.type="text/javascript",n.async=!0,document.head.appendChild(n),n.onload=function(){t()},n.onerror=function(){r()}}catch(e){console.log("error",e),r(e)}}))})),V=A()(function(){var e=(0,x.Z)(j().mark((function e(t,r){var n,o;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.system,e.prev=1,e.next=4,H(n);case 4:return e.next=6,_(n.scope,n.module);case 6:return o=e.sent,e.abrupt("return",o()[r]);case 10:e.prev=10,e.t0=e.catch(1),console.log("error in getFromRemote",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}());const q=o().memo((function(e){var t=(0,n.useRef)(null),r=(0,n.useState)(null),a=(0,c.Z)(r,2),i=a[0],s=a[1];(0,n.useEffect)((function(){l(e)}));var l=function(){var r=(0,x.Z)(j().mark((function r(){return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,V(e,"default");case 3:(0,r.sent)(t.current,W({},e)),r.next=11;break;case 7:throw r.prev=7,r.t0=r.catch(0),s(r.t0.message),r.t0;case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}();return o().createElement("div",null,i?o().createElement("div",null,o().createElement("h3",null,"Error loading remote component"),o().createElement("p",null,i),o().createElement("p",null,"Check console for more information")):o().createElement("div",{ref:t},"Loading"))}));var G=r(15832),N=r(44080),Q=r(77315),U=r(35025);function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){(0,C.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e){var t=(0,s.useRecoilValue)(v),r=(0,n.useState)(Object.keys(t)),a=(0,c.Z)(r,2),i=a[0],l=a[1];return(0,n.useEffect)((function(){console.log("modules",t),l(Object.keys(t))}),[t]),o().createElement("div",{style:{marginTop:64,marginLeft:-10}},i.map((function(e){if(t[e]&&t[e].dimensions)return o().createElement($,{key:e,id:e,mod:t[e]})})))}var X=A()((function(e){return(0,s.atom)({key:"boxState_".concat(e.url),default:{x:e.dimensions.x,y:e.dimensions.y,w:e.dimensions.w,h:e.dimensions.h,fixed:!0}})})),$=function(e){var t=e.id,r=e.mod,a=(0,s.useRecoilState)(X(r)),i=(0,c.Z)(a,2),l=i[0],u=i[1],m=(0,n.useState)(!1),p=(0,c.Z)(m,2),d=(p[0],p[1],(0,n.useRef)());return o().createElement(B(),{nodeRef:d,position:{x:l.x,y:l.y},onDrag:function(e,t){u(Y(Y({},l),{},{x:t.x,y:t.y}))},disabled:l.fixed},o().createElement("div",{id:"module".concat(t),ref:d,className:"box",style:{width:l.w,height:l.h,display:"flex",position:"absolute",background:"white",border:"1px LightGray solid"}},r.dimensions.fixed?o().createElement(o().Fragment,null):o().createElement("div",null,o().createElement(E.IconButton,{color:"primary",style:{position:"absolute",right:0,bottom:0,zIndex:1},onClick:function(){u(Y(Y({},l),{},{x:r.dimensions.x,y:r.dimensions.y,fixed:!0,minimized:!1}))}},o().createElement(G.Z,null)),o().createElement(E.IconButton,{color:"primary",style:{position:"absolute",right:80,bottom:0,zIndex:1},onClick:function(){l.minimized?u(Y(Y({},l),{},{minimized:!1,w:r.w,h:r.h})):u(Y(Y({},l),{},{minimized:!0,w:300,h:50,y:Math.max(l.y,0)}))}},l.minimized?o().createElement(b.Z,null):o().createElement(U.Z,null)),o().createElement(E.IconButton,{color:"primary",style:{position:"absolute",right:40,bottom:0,zIndex:1},onClick:function(){return u(Y(Y({},l),{},{fixed:!l.fixed}))}},l.fixed?o().createElement(N.Z,null):o().createElement(Q.Z,null))),l.minimized?o().createElement(E.Typography,{style:{marginLeft:10,marginTop:15}},t.toUpperCase()):o().createElement("div",null,o().createElement(n.Suspense,{fallback:o().createElement("p",null,"loading ...")},o().createElement(ee,{mod:r})))))},ee=function(e){var t=e.mod,r=(0,s.useRecoilValue)(m),a=(0,s.useRecoilValue)(v),i=(0,s.useRecoilState)(g),u=(0,c.Z)(i,2),p=u[0],E=u[1],b=(0,s.useRecoilState)(f),w=(0,c.Z)(b,2),j=w[0],x=w[1],O=(0,s.useRecoilState)(d),S=(0,c.Z)(O,2),k=S[0],T=S[1],Z=(0,s.useRecoilState)(h),C=(0,c.Z)(Z,2),P=C[0],D=C[1],R=(0,s.useRecoilState)(y),I=(0,c.Z)(R,2),A=I[0],L=I[1],z=(0,n.useState)(1),F=(0,c.Z)(z,2),B=F[0],M=F[1];(0,n.useEffect)((function(){M((function(e){return e+1}))}),[a]);var W={trigger:A,setTrigger:L,projects:k,setProjects:T,store:r,datasets:p,setDatasets:E,selectedElements:j,setSelectedElements:x,selectionId:P,setSelectionId:D,session:(0,l.getDefaultSession)()};return o().createElement(q,{key:B,system:{module:t.module,url:t.url,scope:t.scope},sharedProps:W,module:t,config:a})},te=r(45258),re=r(28358),ne=r(22318),oe=r(17812),ae=r(60424);function ie(){var e=(0,s.useRecoilState)(p),t=(0,c.Z)(e,2),r=t[0],n=t[1];return o().createElement(o().Fragment,null,o().createElement(te.Z,null,o().createElement(re.Z,null,o().createElement(ne.Z,{variant:"h6",color:"inherit",noWrap:!0,to:"/",style:{color:"white",textDecoration:"none"}},"LBDserver"),o().createElement("div",{style:{flexGrow:1}}),o().createElement(oe.Z,{variant:"outlined",color:"primary",key:"setup",style:{color:"white",fontWeight:"normal"},onClick:function(){return n(!r)}},o().createElement(ae.Z,null)))))}var ce=r(5034),se=r(26975),le=new S.QueryClient,ue=(0,ce.Z)({productionPrefix:"main",seed:"main"});const me=function(){var e=(0,s.useRecoilState)(d),t=(0,c.Z)(e,2),r=t[0],n=t[1],a=(0,s.useRecoilState)(y),i=(0,c.Z)(a,2),l=i[0],u=i[1],m=(0,s.useRecoilState)(p),f=(0,c.Z)(m,2),h=f[0],b=f[1],w=(0,s.useRecoilState)(v),j=(0,c.Z)(w,2),x=j[0],O=j[1],k=(0,s.useRecoilState)(g),T=(0,c.Z)(k,2),Z=(T[0],T[1]);return o().createElement(se.ZP,{generateClassName:ue},o().createElement(S.QueryClientProvider,{client:le},o().createElement(ie,{name:"LBDserver"}),Object.keys(r).length>0?o().createElement(K,null):o().createElement("div",{style:{marginTop:100,justifyContent:"center"}},o().createElement(E.Typography,{variant:"h5"},"Please select a project via the sidebar")),o().createElement(D,{openOptions:h,setOpenOptions:b,trigger:l,setTrigger:u,setDatasets:Z,projects:r,setProjects:n,config:x,setConfig:O,drawerWidth:"40%"})))};i().render(o().createElement(S.QueryClientProvider,{client:new S.QueryClient},o().createElement(s.RecoilRoot,null,o().createElement(me,null))),document.querySelector("#root"))}}]);